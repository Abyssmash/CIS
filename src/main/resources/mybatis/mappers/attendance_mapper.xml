<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cis.attendance.repository.IF_AttendanceRepository">
    <insert id="attendanceInsert" parameterType="com.cis.attendance.dto.AttendanceDTO">
        INSERT INTO attendance VALUES ('test1', DATE_FORMAT(NOW(), '%H:%i'), NULL, DATE_FORMAT(NOW(), '%Y-%m-%d'), NULL, NULL, #{late_check})
    </insert>
    <select id="attendanceSelectAll" resultType="com.cis.attendance.dto.AttendanceDTO">
        SELECT * FROM attendance ORDER BY work_date DESC LIMIT #{startIndex}, #{pageSize}
    </select>
    <update id="attendanceUpdate" parameterType="com.cis.attendance.dto.AttendanceDTO">
        UPDATE attendance SET work_end=#{work_end}, work_total=#{work_total}, significant=#{significant} WHERE work_date=#{work_date}
    </update>
    <select id="attendanceSelectAllCnt" resultType="int">
        SELECT COUNT(*) FROM attendance
    </select>
</mapper>
